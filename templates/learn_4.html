<html>
{% extends "layout.html" %}

{% block content %}

  <head>
  <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


  <style>

  #instruction{
    position: absolute;
    top: 110px;
    left: 50px;
    font-family: Arial;
    font-size: 18px;
  }

  #seasoned-steak{
    position: absolute;
    top: 370px;
    left: 300px;
    z-index: 4;
  }
  #seasoned-steak-img{
    height: 160px;
    width: 220px;
  }

  #flipped-seasoned-steak-img{
    height: 160px;
    width: 220px;

    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
  }

  #season-texture{
    position: absolute;
    top: 360px;
    left: 220px;
    z-index: 2;
  }
  #season-texture-img{
    height: 180px;
    width: 350px;
  }


  #thyme{
    position: absolute;
    top: 85px;
    left: 395px;
    z-index: 2;
  }
  #thyme-img{
    height: 30px;
    width: 80px;
  }

  #uncut-butter{
    position: absolute;
    top: 35px;
    left: 500px;
    z-index: 2;
  }
  #uncut-butter-img{
    height: 60px;
    width: 70px;
  }

  #uncut-garlic{
    position: absolute;
    top: 130px;
    left: 410px;
    z-index: 2;
  }
  #uncut-garlic-img{
    height: 40px;
    width: 50px;
  }

  #salt{
    position: absolute;
    top: 120px;
    left: 500px;
    z-index: 2;
  }
  #salt-img{
    height: 50px;
    width: 20px;
  }

  #pepper{
    position: absolute;
    top: 105px;
    left: 550px;
    z-index: 2;
  }
  #pepper-img{
    height: 55px;
    width: 35px;
  }

  #olive-oil{
    position: absolute;
    top: 60px;
    left: 605px;
    z-index: 2;
  }
  #olive-oil-img{
    height: 100px;
    width: 40px;
  }


  #knife{
    position: absolute;
    top: 340px;
    left: 50px;
    height: 100px;
    width: 100px;
    z-index: 3;
  }

  .pop-up-style{
    position: absolute;
    top: 220px;
    left: 325px;
    height: 400px;
    width: 225px;
    background-color: ivory;
    border-style: solid;
    border-width: 2px;
    z-index: 5;

  }

  .ingredient .description{
    visibility: hidden;
    width: 70px;
    background-color: black;
    color: white;
    text-align: center;
    border-radius: 6px;
    padding: 5px 0;
    position: absolute;
    z-index: 1;
    top: -5px;
    left: 110%;
  }

  .ingredient .description::after{
    content: "";
    position: absolute;
    top: 50%;
    right: 100%;
    margin-top: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent black transparent transparent;
  }

  .ingredient:hover .description{
    visibility: visible;
  }



  #cutting-board{
    position: absolute;
    top: 350px;
    left: 200px;
    height: 200px;
    width: 400px;
    z-index: 1;
  }

  #empty-pan{
    position: absolute;
    top: 340px;
    left: 800px;
    height: 170px;
    width: 300px;
    z-index: 1;
  }


  #temperature{
    position: absolute;
    top: 520px;
    left: 860px;
  }
  .dot {
    height: 25px;
    width: 25px;
    border-radius: 50%;
    border-style: solid;
    margin: 5px;
    display: inline-block;
  }

  #low{
    background-color: lightgreen;
  }

  #med{
    background-color: orange;
  }

  #high{
    background-color: red;
  }



  #temperature-labels{
    position: absolute;
    top: 550px;
    left: 862px;

  }
  .label{
    font-weight: bold;
    font-size: 13px;
    margin: 8px;
  }

  .shake { transform-origin: center center; animation: shake-base 2s ease-in-out; }

  @keyframes shake-base {
    0% {transform: translate(0px, 0px) rotate(0deg);}
    /* 2% {transform: translate(-6px, -6px) rotate(-10deg);}
    4% {transform: translate(1.5px, 0.5px) rotate(0.5deg);} */
    6% {transform: translate(1.5px, -0.5px) rotate(4deg);}
    /* 8% {transform: translate(-0.5px, 1.5px) rotate(-10deg);}
    10% {transform: translate(0.5px, 0.5px) rotate(0.5deg);} */
    12% {transform: translate(1.5px, -6px) rotate(-4deg);}
    /* 14% {transform: translate(1.5px, -0.5px) rotate(0.5deg);}
    16% {transform: translate(-1.5px, -6px) rotate(0.5deg);} */
    18% {transform: translate(0.5px, -6px) rotate(-4deg);}
    /* 20% {transform: translate(-6px, -6px) rotate(0.5deg);}
    22% {transform: translate(-0.5px, -1.5px) rotate(0.5deg);} */
    24% {transform: translate(-1.5px, -6px) rotate(-10deg);}
    /* 26% {transform: translate(-1.5px, 1.5px) rotate(-0.5deg);}
    28% {transform: translate(0.5px, 1.5px) rotate(-10deg);} */
    30% {transform: translate(-0.5px, 1.5px) rotate(4deg);}
    /* 32% {transform: translate(-1.5px, 0.5px) rotate(0.5deg);}
    34% {transform: translate(-6px, 1.5px) rotate(0.5deg);} */
    36% {transform: translate(-0.5px, -6px) rotate(-4deg);}
    /* 38% {transform: translate(0.5px, 1.5px) rotate(-2deg);}
    40% {transform: translate(1.5px, -1.5px) rotate(-0.5deg);} */
    42% {transform: translate(-0.5px, 0.5px) rotate(-4deg);}
    /* 44% {transform: translate(1.5px, 1.5px) rotate(0.5deg);}
    46% {transform: translate(0.5px, -1.5px) rotate(0.5deg);} */
    48% {transform: translate(-1.5px, 0.5px) rotate(-10deg);}
    /* 50% {transform: translate(-0.5px, -1.5px) rotate(-0.5deg);}
    52% {transform: translate(-0.5px, 1.5px) rotate(-0.5deg);} */
    54% {transform: translate(-1.5px, 1.5px) rotate(4deg);}
    /* 56% {transform: translate(-1.5px, -0.5px) rotate(-0.5deg);}
    58% {transform: translate(1.5px, 0.5px) rotate(-0.5deg);} */
    60% {transform: translate(1.5px, 0.5px) rotate(-4deg);}
    /* 62% {transform: translate(-1.5px, -1.5px) rotate(0.5deg);}
    64% {transform: translate(1.5px, 0.5px) rotate(-10deg);} */
    66% {transform: translate(1.5px, -0.5px) rotate(4deg);}
    /* 68% {transform: translate(0.5px, -6px) rotate(-10deg);}
    70% {transform: translate(0.5px, -6px) rotate(-10deg);} */
    72% {transform: translate(1.5px, -1.5px) rotate(4deg);}
    /* 74% {transform: translate(1.5px, -0.5px) rotate(0.5deg);}
    76% {transform: translate(1.5px, -1.5px) rotate(-0.5deg);} */
    78% {transform: translate(1.5px, -1.5px) rotate(-10deg);}
    /* 80% {transform: translate(-6px, -1.5px) rotate(-10deg);}
    82% {transform: translate(1.5px, -6px) rotate(-0.5deg);} */
    84% {transform: translate(1.5px, -6px) rotate(-4deg);}
    /* 86% {transform: translate(1.5px, 0.5px) rotate(0.5deg);}
    88% {transform: translate(-6px, 0.5px) rotate(-10deg);} */
    90% {transform: translate(0.5px, 1.5px) rotate(4deg);}
    /* 92% {transform: translate(-1.5px, 1.5px) rotate(0.5deg);}
    94% {transform: translate(-0.5px, 0.5px) rotate(-10deg);} */
    96% {transform: translate(1.5px, -6px) rotate(1deg);}
    /* 98% {transform: translate(-6px, -0.5px) rotate(-2deg);} */
  }

  #flip-box {
    top: 0px;
    left: 0px;

		width: 70%;
		height: 80%;
		transition: 1s;
		transform-style: preserve-3d;
		position: relative;
    z-index: 3
	}


  </style>


<script>


$(document).ready(function(){

  //counter
  let step=4;

  //Move to next step
  $("#arrow-next").click(function(){
      window.location.href="/learn_5";
    })


  //Selected item is above other items while dragging
  $(".ingredient").mouseenter(
  function() {
    $(this).css("z-index", "3");
  }
  );

  $(".ingredient").mouseleave(
  function() {
    $(this).css("z-index", "2");
  }
  );

  //Draggable items
  $("#frozen-steak").draggable({
        revert: "invalid"
  });

  $("#thyme").draggable({
        revert: "invalid"
  });

  $("#uncut-butter").draggable({
        revert: "invalid"
  });

  $("#uncut-garlic").draggable({
        revert: "invalid"
  });

  $("#salt").draggable({
        revert: "invalid"
  });

  $("#pepper").draggable({
        revert: "invalid"
  });

  $("#olive-oil").draggable({
        revert: "invalid"
  });

  $("#knife").draggable({
        revert: "invalid"
  });

  //Droppable items
  $("#cutting-board").droppable({
    accept: false
  });

  $("#empty-pan").droppable({
    accept: false
  });


  //Droppable-conditions
  if(step==4){

    let clickState = 0;

    //await delay(5000);    // wait 5 sec
    $("#instruction").html("(4)<b> RUB STEAK </b>with excess salt and <br>pepper that fell onto the cutting board");

    var one = $('<p id="sub-instruction" style="color:red; position:fixed; left:120px; top:310px;">Click the steak to learn how to properly season</p>').appendTo('#text');

    // once seasoned-steak clicked
    $("#seasoned-steak").click(function() {

      clickState++;

      if (clickState == 1) {      // show rubbing-steak gif

        $('#sub-instruction').remove();

        let pop = $("#pop-up").addClass("pop-up-style");    // pop up of rubbing steak gif

        let gif = $('<img src="images/rubbing-steak-gif.gif" height="400" alt="Rubbing Steak gif" id="rubbing-steak-gif" />').appendTo('#pop-up');

        $(".ingredient").css("opacity", "0.5").delay(3000).fadeTo(1, 1);
        $("#cutting-board").css("opacity", "0.5").delay(3000).fadeTo(1, 1);
        $("#empty-pan").css("opacity", "0.5").delay(3000).fadeTo(1, 1);
        $("#temperature").css("opacity", "0.5").delay(3000).fadeTo(1, 1);
        $("#temperature-labels").css("opacity", "0.5").delay(3000).fadeTo(1, 1);

        setTimeout(function() {

          gif.fadeOut('fast');
          pop.fadeOut('fast');
          var two = $('<p id="sub-instruction" style="color:red; position:fixed; left:120px; top:310px;">Now click the steak to try it yourself</p>').appendTo('#text');
        }, 3000);

      } else if (clickState == 2) {   // shake the steak

        $('#seasoned-steak-img').addClass('shake');

        $('#sub-instruction').remove();

        setTimeout(function() {
          var two = $('<p id="sub-instruction" style="color:red; position:fixed; left:120px; top:310px;">Click the steak again to flip</p>').appendTo('#text');
        }, 2000);

      } else if (clickState == 3) {   // flip the steak

        if($("#flip-box").css("transform") == 'none') {
    			$("#flip-box").css("transform","rotateY(360deg)");
    			$("#flip-box img").attr("src","images/flipped-seasoned-steak.png");
          $("#flip-box img").attr("id","seasoned-steak-img");
        }

        $('#sub-instruction').remove();

        setTimeout(function() {
          var two = $('<p id="sub-instruction" style="color:red; position:fixed; left:120px; top:310px;">Now click the steak again to season this side with the leftovers</p>').appendTo('#text');
        }, 1000);

      } else if (clickState == 4) {   // shake the steak + make seasoning-texture disappear

        $('#seasoned-steak').addClass('shake');
        $('#season-texture-img').fadeOut('slow');

        $('#sub-instruction').remove();

      }

    });

  }

});


</script>


  </head>
  <body>


  <div id="flip-box">
    <div class="ingredient" id="seasoned-steak">
        <img id="seasoned-steak-img" src="images/seasoned-steak.png" alt="Seasoned Steak"> </img>
        <span class="description">Seasoned Steak</span>
    </div>
  </div>

  <!-- <div class="ingredient" id="seasoned-steak">
      <img id="seasoned-steak-img" src="images/seasoned-steak.png" alt="Seasoned Steak"> </img>
      <span class="description">Seasoned Steak</span>
  </div> -->
  <div class="ingredient" id="season-texture">
      <img id="season-texture-img" src="images/season-texture.png" alt="Seasoning"> </img>
      <span class="description">Seasoning</span>
  </div>
  <!-- <div class="ingredient" id="frozen-steak">
      <img id="frozen-steak-img" src="images/frozen-steak.png" alt="Frozen Steak"> </img>
      <span class="description">Steak</span>
  </div> -->
  <div class="ingredient" id="thyme">
      <img id="thyme-img" src="images/thyme.png" alt="Thyme"> </img>
      <span class="description">Thyme</span>
  </div>
  <div class="ingredient" id="uncut-butter">
      <img id="uncut-butter-img" src="images/uncut-butter.png" alt="Uncut Butter"> </img>
      <span class="description">Butter</span>
  </div>
  <div class="ingredient" id="uncut-garlic">
      <img id="uncut-garlic-img" src="images/uncut-garlic.png" alt="Uncut Garlic"> </img>
      <span class="description">Garlic</span>
  </div>
  <div class="ingredient" id="salt">
      <img id="salt-img" src="images/salt.png" alt="Salt"> </img>
      <span class="description">Salt</span>
  </div>
  <div class="ingredient" id="pepper">
      <img id="pepper-img" src="images/pepper.png" alt="Pepper"> </img>
      <span class="description">Pepper</span>
  </div>
  <div class="ingredient" id="olive-oil">
      <img id="olive-oil-img" src="images/olive-oil.png" alt="Olive Oil"> </img>
      <span class="description">Olive Oil</span>
  </div>


  <div id="instruction"> </div>

  <img id="knife" src="images/knife.png" alt="Knife">

  <div id="text"></div>

  <img src="images/cutting-board.png" alt="Cutting Board" id="cutting-board"> </img>
  <img src="images/empty-pan.png" alt="Empty Pan" id="empty-pan"> </img>

  <div id="temperature">
  <span class="dot" id="low"></span>
  <span class="dot" id="med"></span>
  <span class="dot" id="high"></span>
  </div>
  <div id="temperature-labels">
  <span class="label">low</span>
  <span class="label">med</span>
  <span class="label">high</span>
  </div>

  <div id="pop-up"> </div>



  </body>
</html>
